{"createdAt":"2025-10-06T19:47:43.336Z","updatedAt":"2025-10-06T19:51:38.671Z","id":"1rjjuTWFH0pTv2WJ","name":"[Resumidor de reunião]","active":false,"isArchived":false,"nodes":[{"parameters":{"method":"POST","url":"https://api.cloud.vexa.ai/bots","sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-API-Key"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"platform","value":"google_meet"},{"name":"native_meeting_id","value":"=dah-fzyo-axt"},{"name":"bot_name","value":"INFRABOT"}]},"options":{}},"id":"f2e2a08c-7c45-4957-9d09-99b0f0051624","name":"Add bot to meet","type":"n8n-nodes-base.httpRequest","position":[-928,-128],"typeVersion":4.2},{"parameters":{"promptType":"define","text":"=# Resumo Rápido da Reunião\n\nAnalise a transcrição desta reunião e crie um resumo detalhado\n\n**Transcrição da Reunião:**\n{{ $json.fullTranscript }}\n\n**Detalhes da Reunião:**\n- Duração: {{ $json.durationMinutes }} minutos\n- Participantes: {{ $json.participants }}\n\nVocê é um assistente especializado em análise de reuniões corporativas. \nAnalise a transcrição da reunião fornecida e extraia as seguintes informações \nde forma estruturada:\n\nINFORMAÇÕES DA REUNIÃO:\n- Título: [identifique ou sugira um título descritivo]\n- Duração: [calcule baseado nos timestamps ou estime]\n- Participantes: [lista fornecida]\n- Data: {{ $('Add bot to meet').item.json.created_at }}\n\nANÁLISE REQUERIDA:\n\n1. RESUMO EXECUTIVO (maximo 800 caracteres)\n   - Objetivo principal da reunião\n   - Principais tópicos discutidos\n   - Conclusões gerais\n\n2. PONTOS CRÍTICOS\n   Identifique e categorize pontos importantes em:\n   - DECISION (Decisões): Decisões tomadas pela equipe\n   - BLOCKER (Bloqueios): Impedimentos que bloqueiam progresso\n   - RISK (Riscos): Riscos identificados que precisam atenção\n   - OPPORTUNITY (Oportunidades): Oportunidades identificadas\n\n   Para cada ponto crítico forneça:\n   - Título curto e direto\n   - Descrição detalhada (1-2 frases)\n   - Categoria\n\n3. TAREFAS/SOLICITAÇÕES\n   Extraia todas as tarefas mencionadas onde alguém foi designado ou \n   solicitado a fazer algo. Para cada tarefa:\n   - Título da tarefa (ação clara)\n   - Responsável (pessoa designada)\n   - Prioridade (high/medium/low) baseado em:\n     * High: urgente, bloqueador, prazo curto\n     * Medium: importante mas não urgente\n     * Low: pode esperar, melhorias futuras\n   - Status (sempre 'pending' para tarefas novas)\n   - Data de entrega (se mencionada, formato YYYY-MM-DD)\n\n4. PRÓXIMOS PASSOS\n   Liste ações coletivas ou organizacionais que a equipe precisa executar\n\n5. OBSERVAÇÕES/ATENÇÕES\n   Insights importantes, preocupações levantadas, lembretes para a equipe\n\nFORMATO DE SAÍDA: JSON estruturado conforme o schema TypeScript fornecido.","options":{}},"id":"5404f9a3-9b60-4585-a533-a12f84f7a168","name":"AI Agent","type":"@n8n/n8n-nodes-langchain.agent","position":[64,-144],"typeVersion":2.1},{"parameters":{"url":"=https://api.cloud.vexa.ai/transcripts/google_meet/{{ $json.native_meeting_id }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-API-Key","value":"ewCZVCjlvZ0xSZbbv3TuyMuUKVdBGFLEv5Kkyawy"}]},"options":{"timeout":30000}},"id":"f5d36303-9f50-4886-a34a-071999443462","name":"Get Vexa Transcript","type":"n8n-nodes-base.httpRequest","position":[-720,-128],"typeVersion":4.1},{"parameters":{},"id":"cce411d6-872a-483f-9c86-7093a762b327","name":"Wait","type":"n8n-nodes-base.wait","position":[-336,32],"webhookId":"eb04f35a-7f4e-41f6-a9d7-bc2df86e4e16","typeVersion":1.1},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"40ee5a62-d7e4-4f2e-9f41-e073dd09e575","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{$json.status}}","rightValue":"completed"}]},"options":{}},"id":"96fc09bb-b785-45f5-8ea9-6e4465b055b4","name":"If","type":"n8n-nodes-base.if","position":[-496,-128],"typeVersion":2.2},{"parameters":{"jsCode":"// Get the input data\nconst inputData = $input.all()[0].json; // Get the first item which contains the meeting data\n\n// Extract segments from the nested structure\nconst segments = inputData.segments || [];\n\nif (!segments || segments.length === 0) {\n  return [{\n    json: {\n      fullTranscript: \"No transcript data available\",\n      participants: \"None\",\n      durationSeconds: 0,\n      durationMinutes: 0\n    }\n  }];\n}\n\n// Combine into a single readable transcript\nconst transcript = segments\n  .map(segment => {\n    const speaker = segment.speaker || 'Unknown';\n    const text = segment.text || '';\n    const time = Math.round(segment.start || 0);\n    return `[${time}s] ${speaker}: ${text}`;\n  })\n  .join('\\n');\n\n// Get unique participants\nconst participants = [...new Set(\n  segments\n    .map(segment => segment.speaker)\n    .filter(speaker => speaker && speaker !== null)\n)];\n\n// Calculate duration\nconst startTime = segments[0]?.start || 0;\nconst endTime = segments[segments.length - 1]?.end || 0;\nconst duration = Math.round(endTime - startTime);\n\n// Get meeting info from the root level\nconst meetingId = inputData.native_meeting_id || 'Unknown';\nconst platform = inputData.platform || 'Unknown';\nconst status = inputData.status || 'Unknown';\n\nreturn [{\n  json: {\n    fullTranscript: transcript,\n    participants: participants.join(', ') || 'Unknown',\n    durationSeconds: duration,\n    durationMinutes: Math.round(duration / 60),\n    meetingId: meetingId,\n    platform: platform,\n    status: status,\n    totalSegments: segments.length\n  }\n}];"},"id":"c078de24-6c02-4885-ae8f-16ce6cc50f48","name":"Code","type":"n8n-nodes-base.code","position":[-208,-144],"typeVersion":2},{"parameters":{"model":{"__rl":true,"mode":"list","value":"chatgpt-4o-latest","cachedResultName":"chatgpt-4o-latest"},"options":{}},"id":"0436bbaf-feca-4272-9132-a56b3d274885","name":"OpenAI Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[0,80],"typeVersion":1.2,"credentials":{"openAiApi":{"id":"CTMpiiF2zxl00KmT","name":"OpenAi account"}}},{"parameters":{"jsCode":"// Pega o objeto de saída original (string JSON dentro de \"output\")\nconst raw = $input.first().json.output;\nconst parsed = JSON.parse(raw);\n\n// === Informações básicas ===\nconst info = parsed.informacoesReuniao || {};\n\nconst title = info.titulo || \"Título não informado\";\nconst date = info.data !== \"não fornecida\" ? info.data : null;\nconst duration = info.duracao || null;\nconst participants = info.participantes || [];\n\nconst summary = parsed.resumoExecutivo || \"\";\n\n// === Pontos críticos ===\nconst criticalPoints = (parsed.pontosCriticos || []).map(p => ({\n  title: p.titulo,\n  description: p.descricao,\n  category: p.categoria.toLowerCase()\n}));\n\n// === Tarefas ===\nconst tasks = (parsed.tarefas || []).map(t => ({\n  title: t.titulo,\n  assignee: t.responsavel,\n  priority: t.prioridade,\n  status: t.status,\n  dueDate: t.dataEntrega\n}));\n\n// === Próximos passos & Observações ===\nconst nextSteps = parsed.proximosPassos || [];\nconst observations = parsed.observacoes || [];\n\n// === Objeto final ===\nreturn [\n  {\n    json: {\n      title,\n      date,\n      duration,\n      participants,\n      summary,\n      criticalPoints,\n      tasks,\n      nextSteps,\n      observations\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[512,-144],"id":"1d7f2792-80e5-43da-823e-39055155bedf","name":"Code in JavaScript"},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"calendarId":{"__rl":true,"value":"acessos@infradevdigital.com.br","mode":"list","cachedResultName":"acessos@infradevdigital.com.br"},"triggerOn":"eventStarted","options":{}},"type":"n8n-nodes-base.googleCalendarTrigger","typeVersion":1,"position":[-1120,-128],"id":"7afd93e4-953e-4660-97d9-9b942bc0f357","name":"Google Calendar Trigger","credentials":{"googleCalendarOAuth2Api":{"id":"8lAi01oEe6Bc2imb","name":"Calendar Infradev"}}}],"connections":{"Add bot to meet":{"main":[[{"node":"Get Vexa Transcript","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Get Vexa Transcript":{"main":[[{"node":"If","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Get Vexa Transcript","type":"main","index":0}]]},"If":{"main":[[{"node":"Code","type":"main","index":0}],[{"node":"Wait","type":"main","index":0}]]},"Code":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Google Calendar Trigger":{"main":[[{"node":"Add bot to meet","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"12bbac9a-ee2f-440e-90e9-8b7387d9f578","triggerCount":0,"shared":[{"createdAt":"2025-10-06T19:47:43.336Z","updatedAt":"2025-10-06T19:47:43.336Z","role":"workflow:owner","workflowId":"1rjjuTWFH0pTv2WJ","projectId":"E1RXJ9dhy40aA4CQ"}],"tags":[]}